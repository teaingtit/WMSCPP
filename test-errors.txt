
> my-wms-app@0.1.0 test:unit
> vitest test/lib/action-utils.test.ts --run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mC:/Users/nteai/Desktop/project/WMSCPP[39m

 [31mÎ“Â¥Â»[39m test/lib/action-utils.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 14[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return validated data when valid[32m 2[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return error response when invalid[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle multiple validation errors[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should extract specified fields from FormData[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return null for missing fields[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create success response with message[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should include additional data when provided[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create error response with message[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return error response for duplicate key error (23505)[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return null for non-duplicate errors[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return null when error is null[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return error for invalid parameters[32m 0[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should add unit to category successfully[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return error when adding duplicate unit[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should remove unit from category successfully[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return error when removing non-existent unit[39m[32m 1[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle database errors[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should process all items successfully[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle partial failures[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle exceptions in action[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle empty items array[32m 0[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 4 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  test/lib/action-utils.test.ts > action-utils > modifyCategoryUnits > should add unit to category successfully
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» test/lib/action-utils.test.ts:184:36
    182|             const result = await modifyCategoryUnits('cat-123', 'kg', Î“Ã‡Âª
    183| 
    184|             expect(result.success).toBe(true);
       |                                    ^
    185|             expect(result.message).toContain('KG');
    186|             expect(result.message).toContain('added');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/4]Î“Ã„Â»

 FAIL  test/lib/action-utils.test.ts > action-utils > modifyCategoryUnits > should return error when adding duplicate unit
AssertionError: expected 'Error: Cannot destructure property \'Î“Ã‡Âª' to contain 'already exists'

Expected: "already exists"
Received: "Error: Cannot destructure property 'data' of '(intermediate value)' as it is undefined."

 Î“Â¥Â» test/lib/action-utils.test.ts:199:36
    197| 
    198|             expect(result.success).toBe(false);
    199|             expect(result.message).toContain('already exists');
       |                                    ^
    200|         });
    201| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/4]Î“Ã„Â»

 FAIL  test/lib/action-utils.test.ts > action-utils > modifyCategoryUnits > should remove unit from category successfully
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» test/lib/action-utils.test.ts:212:36
    210|             const result = await modifyCategoryUnits('cat-123', 'kg', Î“Ã‡Âª
    211| 
    212|             expect(result.success).toBe(true);
       |                                    ^
    213|             expect(result.message).toContain('KG');
    214|             expect(result.message).toContain('removed');

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/4]Î“Ã„Â»

 FAIL  test/lib/action-utils.test.ts > action-utils > modifyCategoryUnits > should return error when removing non-existent unit
AssertionError: expected 'Error: Cannot destructure property \'Î“Ã‡Âª' to contain 'not found'

Expected: "not found"
Received: "Error: Cannot destructure property 'data' of '(intermediate value)' as it is undefined."

 Î“Â¥Â» test/lib/action-utils.test.ts:227:36
    225| 
    226|             expect(result.success).toBe(false);
    227|             expect(result.message).toContain('not found');
       |                                    ^
    228|         });
    229| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/4]Î“Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (21)[39m
[2m   Start at [22m 16:05:37
[2m   Duration [22m 1.68s[2m (transform 80ms, setup 88ms, import 115ms, tests 14ms, environment 488ms)[22m

